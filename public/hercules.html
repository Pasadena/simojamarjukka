<!DOCTYPE html>
<html>
    <head>
    <title>Simo <3 Maikka</title>
    <base href="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">
    <meta http-equiv="Content-Language" content="fi" />
    <meta charset="utf-8"/>

    <!-- Color the status bar on mobile devices -->
    <meta name="theme-color" content="#363636">
    <link rel="stylesheet" href="styles.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    </head>
    <body class="container">
        <div class="riddle-box">
            <div class="riddle-box-header">
                <h3 class="no-margin">Hello there!</h3>
            </div>
            <div class="riddle-box-content">
                <div class="riddle-info">
                    <p>
                        Boys and girls, tieto on valtaa! Kumpaan hääparista kuvaus osuu? Vai ovatko molemmat veistetty samasta puusta?
                        Olette ratkaisseet arvoituksen - tai niin te luulette. Vastauksenne muodostavat merkkijonon, 
                        joka joko on oikein tai ei...
                    </p>
                    <p>
                        Tarkastakaa vastauksenne, if you dare!
                    </p>
                </div>
                <input id="answer" placeholder="Oikea vastaus on..." class="riddle-input" />
                <button id="checkButton" class="riddle-button" onclick="onCheckButtonPressed(); return false;">Tarkasta</button>
            </div>
            <div class="riddle-box-footer">
                <div id="correctAnswerInfo" class="invisible">
                    <p>Oikein! Seuraava arvioitus löytyy paikast paljun lähellä olevasta puulaatikosta.</p>
                    <p>Ps...</p>
                    <p class="alphabet-code">A=9, B=2, C=2, D=5, E=3, F=8, G=0, H=6, I=7, J=4, 
                        K=1, L=4, M=5, N=8, O=3, P=1, Q=9, R=7, S=0, 
                        T=2, U=1, V=0, X=4, Y=8, Z=9, Å=3, Ä=2, Ö=5
                    </p>
                </div>
                <div id="incorrectAnswerInfo" class="invisible"><p></p></div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        function onCheckButtonPressed() {
            console.log('Sitä munalla silmään joka sourcea tutkii...');
            var solution = 'abaaacbc';
            var answer = document.getElementById('answer');
            var missedCount = checkAnswer(answer.value, solution);
            if(missedCount == 0) {
                toggleVisible(document.getElementById('correctAnswerInfo'), true);
                toggleVisible(document.getElementById('incorrectAnswerInfo'), false);
            } else {
                var incorrectInfo = document.getElementById('incorrectAnswerInfo');
                toggleVisible(document.getElementById('correctAnswerInfo'), false);
                toggleVisible(incorrectInfo, true);
                var amountOfCorrectGuesses = solution.length - missedCount;
                incorrectInfo.firstChild.innerHTML = 'Sivuosuma! Saitte ' + amountOfCorrectGuesses + '/' + solution.length + ' oikein. Better luck next time!';
            }
        }
        function checkAnswer(answer, solution) {
            var index = 0;
            var missedCount = 0;
            for(var character of solution) {
                var singleAnswer = answer[index];
                if(!singleAnswer || character !== singleAnswer.toLowerCase()) {
                    ++missedCount;
                }
                ++index;
            }
            return missedCount;
        }
        function toggleVisible(element, visible) {
            if(visible) {
                element.classList.remove('invisible');
            } else {
                element.classList.add('invisible');
            }
        }
    </script>
</html>